!function(){function t(t){this.options=this.options||{},$.extend(this.options,n),$.extend(this.options,t),this.init()}function a(t,a){for(var e=a[0][0],n=0;n<a.length;n++)if(a[n][0]==t||a[n][1]==t){e=a[n][0];break}return e}function e(t){for(var a=[[0,"请选择"]],e=0;e<t.length;e++)a.push([t[e].Id,t[e].Name]);return a}var n={title:"选择城市",city:!0,area:!0,btnPosition:"top",itemPrintFn:function(t){return'<span data-id="'+t[0]+'">'+t[1]+"</span>"}},i=("https:"===location.protocol?"https:":"http:")+"//m.ly.com/member/ajax/GetNationalPlace";t.prototype.init=function(){var t=this,a=t.options;!1===a.city?a.className="city-select-pro":0==a.area&&(a.className="city-select-city"),t.options.changeFn=function(e,n,i){e[0];var o=parseInt($(e[1]).attr("data-id"),10);"city"==e[0]&&(t.selectCity[1]=o),"pro"==e[0]&&(t.selectCity[0]=o),"area"==e[0]&&(t.selectCity[2]=o),"pro"==e[0]?a.city&&(t.loadCity("1",t.selectCity[0],function(a){t.selectObj.updateSelect({name:"city",data:a,index:0}),n&&n(a)}),a.area&&!e[2]&&(t.selectObj.updateSelect({name:"area",data:[[0,"请选择"]],index:0}),i&&i(data))):"city"==e[0]&&a.area&&t.loadCity("2",t.selectCity[1],function(a){t.selectObj.updateSelect({name:"area",data:a,index:0}),i&&i(a)})};var e=t.options.selectFn||function(){};t.options.selectFn=function(t){for(var a=[],n=0;n<t.length;n++){var i=$("span",t[n][1]);a.push([parseInt(i.attr("data-id"),10),i.html()])}return e(a)},t.selectCity=[],t.createCityArr(function(){t.selectObj=$.select(t.options),t.selectCity=a.normal})},t.prototype.title=function(t){return this.selectObj.title(t)},t.prototype.createCityArr=function(t){var e=this,n=e.options;e.options.data=[],n.normal=n.normal||[0],n.normal[0]=a(n.normal[0],$.citySelectData.provinceData),e.options.data.push({name:"pro",data:$.citySelectData.provinceData,index:n.normal[0]}),n.normal?0===n.normal[0]?(n.city&&e.options.data.push({name:"city",data:[[0,"请选择"]],index:0}),n.area&&n.city&&e.options.data.push({name:"area",data:[[0,"请选择"]],index:0}),t()):e.loadCity("1",n.normal[0],function(i){n.normal[1]=n.normal[1]||0,n.normal[1]=a(n.normal[1],i),e.options.data.push({name:"city",data:i,index:n.normal[1]}),n.area&&n.city&&(0!=n.normal[1]?e.loadCity("2",n.normal[1],function(i){n.normal[2]=n.normal[2]||0,n.normal[2]=a(n.normal[2],i),e.options.data.push({name:"area",data:i,index:n.normal[2]}),t()}):(e.options.data.push({name:"area",data:[[0,"请选择"]],index:0}),t()))}):(n.city&&(e.options.data.push({name:"city",data:[[0,"请选择"]],index:0}),n.normal.push(0)),n.area&&n.city&&(e.options.data.push({name:"pro",data:[[0,"请选择"]],index:0}),n.normal.push(0)),t())},t.prototype.loadCity=function(t,a,n){function o(i){if(i&&i.ReturnValue&&i.ReturnValue.length){var o=e(i.ReturnValue);"1"===t?($.citySelectData.cityData.push({id:a,data:o}),l.selectCity[0]&&l.selectCity[0]==a&&n(o)):($.citySelectData.areaData.push({id:a,data:o}),l.selectCity[1]&&l.selectCity[1]==a&&n(o))}}var c,r,l=this,s=(l.options,"GetCity");if(0==a&&n([[0,"请选择"]]),t&&a){"1"===t?c=$.citySelectData.cityData:(c=$.citySelectData.areaData,s="GetDivision");for(var p=0;p<c.length;p++)if(c[p].id==a){r=c[p];break}r?n(r.data):$.ajax({url:i,data:"type="+s+"&pid="+a,dataType:"jsonp",success:function(t){o(t)},error:function(){o({ReturnValue:[]})}})}},t.prototype.open=function(t){var a=this,e=a.options;t?($.extend(e,t),a.createCityArr(function(){a.options.data.forEach(function(t){a.selectObj.updateSelect(t)}),this.selectObj.open()})):this.selectObj.open()},t.prototype.setNormal=function(t,a){var e=["pro","city","area"],n=this;t[0]?(n.selectObj.updateIndex(e[0],t[0]),n.options.changeFn([e[0],$('.select-ul li[data-id="'+t[0]+'"]',n.selectObj._options._wrap),!0],function(){t[1]?(n.selectObj.updateIndex(e[1],t[1]),n.options.changeFn(["city",$('.select-ul li[data-id="'+t[1]+'"]',n.selectObj._options._wrap),!0],!1,function(){t[2]?(n.options.changeFn(["area",$('.select-ul li[data-id="'+t[2]+'"]',n.selectObj._options._wrap)]),ff.selectObj.updateIndex(e[2],t[2])):a()})):a()})):a()},t.prototype.close=function(t){this.selectObj.close()},t.prototype.destroy=function(){me.selectObj.destroy(),me.selectObj=null},$.citySelect=function(a){return new t(a)},$.citySelectData=$.citySelectData||{},$.citySelectData.provinceData=$.citySelectData.provinceData||[[0,"请选择省"],[2,"安徽"],[3,"北京"],[4,"福建"],[5,"甘肃"],[6,"广东"],[7,"广西"],[8,"贵州"],[9,"海南"],[10,"河北"],[11,"河南"],[12,"黑龙江"],[13,"湖北"],[14,"湖南"],[15,"吉林"],[16,"江苏"],[17,"江西"],[18,"辽宁"],[19,"内蒙古"],[20,"宁夏"],[21,"青海"],[22,"山东"],[23,"山西"],[24,"陕西"],[25,"上海"],[26,"四川"],[27,"天津"],[28,"西藏"],[29,"新疆"],[30,"云南"],[31,"浙江"],[32,"重庆"],[33,"香港"],[34,"澳门"],[35,"台湾"]],$.citySelectData.cityData=$.citySelectData.cityData||[],$.citySelectData.areaData=$.citySelectData.areaData||[]}(),"function"==typeof define&&define(function(t,a,e){t("select"),a.citySelect=$.citySelect});